#!/bin/bash

regex="layout: +([a-z]+)"
layout_query=$(setxkbmap -query | grep layout)

[[ $layout_query =~ $regex ]]

layout=${BASH_REMATCH[1]}

case $layout in
  us) target="de";;
  de) target="us";;
esac

setxkbmap $target

# Reload xmodmap because setxkbmap clears it
xmodmap ~/.Xmodmap
